告警及消警
============

    控制器实时读取各子设备数据后，经判断如发生了特定事件，将事件及伴随的数据发送至平台，告知用户设备中某些状态和数据超出范围，以引起用户的关注和采取响应的处理措施。
    
    按照以下列表分类:
        * `环境异常`_ 
        * `电力安全`_
        * `故障异常`_

环境异常
------------

    未分类

        * 光线异常无人
            #. 当采集到的光线值处于 [ **光线异常光线阈值（区间开始值）** , **光线异常光线阈值(区间结束值)** ] 范围。
            #. 持续时长 >= **光线异常无人时间阈值** 。
            #. 当1、2同时满足，判定为光线异常无人. 触发告警。
            
            * 消警规则:

        * 光线异常有人  
            #. 当采集到的光线值处于 [ **人体感应光线阈值(区间开始值)** ,  无穷大 ] 范围且
            #. 持续时长 >= **人体感应有人时间阈值**, 
            #. 判定为光线异常有人， 触发告警。
            
            * 消警规则:

    一类
        #. 连续人员进入
            当 “人员进入” 触发后，且持续足够时长(告警状态->连续有人进入 中设定，缺省0)后， 触发告警。
            
            * 消警规则:

        #. 连续高温

            * 消警规则:

    二类
        #. 人员进入
            #. 人体感应开关开启状态, 人体传感器触发，持续时长>=6秒。
            #. 当光线值在 [**人体感应光线阈值(区间开始值）**, **人体感应光线阈值(区间结束值)**] 范围。
            #. 当2中的光线值范围有效时(二者不全为0)， 1与2同时满足，判定为人员进入，触发告警。
            #. 当2中的光线值范围无效时(二者==0)， 1满足后，即判定为人员进入，触发告警。

            * 消警规则:
        
        #. 高温告警

            * 消警规则:
        
        #. 高温预警

            * 消警规则:

        #. 连续运行
            节能模式 [#节能模式]_ 开启状态，依据空调机的功率判断，空调机持续运行(制冷)的时间长度。当超过预设时长即认定 **连续运行异常**。

            * 告警：当 **连续运行保护告警** 产生后，即刻上报至平台。
            * 消警: 空调机停止运行后，发出消警至平台。
            
        #. 连续停机
            节能模式 [#节能模式]_ 开启状态，依据空调机的功率判断，空调机持续关机的时间长度。当超过预设时长即认定 **连续停止异常**。

            * 告警：当 **连续运行保护告警** 产生后，即刻上报至平台。
            * 消警: 空调机正常运行后，发出消警至平台。

电力安全
------------

    一类
        #. 空调异常断电
            采集器的进电异常
                * 2P 采集器进电电压低于60v，判定为进电异常.
                * 3P 采集器3相进电电压全部低于60v，判定为进电异常.
            **消警**: 恢复供电1分钟后，判定为消警，发送消警消息到平台。

    二类
        #. 过压
        #. 欠压
        #. 过流
        #. 漏电
        #. 故障电弧
        #. 供电异常
        #. 异常波形

故障异常
------------

    一类
        #. 制冷不足
            采集器与空调机连接示意
            采集器  --------- *控制指令* -------> 空调机
            采集器  <------ *读取回风温度* -----  空调机
            采集器发送 **开机运行** 指令到空调机，随后通过 **回风温度传感器** 判断制冷是否生效。当回风温度
            * 告警: 采集器读取回风温度数值，判断温度下降的速度异常，累计3次降温速度异常， 认定为 **制冷不足**。
            * 消警: 采集器读取回风温度数值，判断温度已达到预期或者温降达到预期，即发送 **制冷不足消警** 至平台平台。
            * **上述告警、消警 触发条件缺少数据实现量化**

    二类
        #. 空调故障
            节能模式 [#节能模式]_ 开启时，平台下发或者控制器下发“开机运行”指令，随后依据采集器的数据判断，如空调机持续15分钟未能完成“开机运行”指令，认定为 **空调故障** 。
            “开机运行”指令，由采集器直接输出到空调机，每间隔3分钟发送一次。
            * 告警: 空调故障发生后，即刻上报 **空调故障告警** 至平台平台。
            * 消警: 当 **开机运行指令** 下发后，且持续判断空调机“执行指令失败”， 此时会每间隔3分钟重复发送控制指令。当采集器依据反馈数据，判断空调机执行了 **开机运行指令** 成功，会发出“消警”至平台。
        
        #. 异常停止
            节能模式 [#节能模式]_ 开启状态，当空调在运行过程（此过程为采集器内的预期过程）周期读取空调机的功率值大小。当空调机的功率值过小时，认定 **空调机异常停止**
            
            * 告警: 当 **异常停止告警** 产生后，即刻上报至平台。
            * 消警: 当检测空调机功率值达到预期后，发送消警到平台。
            * **空调机功率值过小，持续多长时间???** 

        #. 热保故障
        #. 子设备通讯故障

